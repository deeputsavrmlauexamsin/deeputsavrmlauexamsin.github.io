<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Print_Data</title>
<style>
body { margin:0; font-family: "Tahoma"; background:#FAFAFA; }
.page { width:18cm; min-height:22cm; margin:0 auto; padding:1cm; background:white; box-shadow:0 0 5px rgba(0,0,0,0.1); }
.responsive-image { height:auto; width:100%; }
.table-card { width:100%; border-collapse:collapse; border:15px solid #f38610; outline:2px solid black; }
td, th { vertical-align: middle; }
.qr-block, .photo-block { padding:10px; }
@media print {
    .page { width:8cm; min-height:10cm; box-shadow:none; background:none; page-break-after:always; }
    body { font-size:10pt; margin:-10px; }
}
</style>
</head>
<body>
<div id="cards-container"></div>

<script>
const BASE_URL = "https://deeputsavrmlauexamsin.github.io/Department/Print_Data/";
async function loadCSV() {
    const res = await fetch(BASE_URL + "data.csv");
    const text = await res.text();
    const rows = text.trim().split("\n");
    const headers = rows[0].split("\t");
    const users = rows.slice(1).map(r => {
        const values = r.split("\t");
        let obj = {};
        headers.forEach((h,i)=> obj[h]=values[i]);
        return obj;
    });
    return users;
}

function createCard(user) {
    return `
    <div class="page">
        <table class="table-card">
            <thead>
                <tr><td colspan="5" style="text-align:center; padding-top:15px;">
                    <img src="https://deeputsav.rmlauexams.in/img/NEWPRINTLOGO.png" style="width:200px; height:auto;">
                </td></tr>
                <tr><td colspan="5" style="text-align:center; padding-top:5px;"><h5><b>परिचय पत्र</b></h5></td></tr>
            </thead>
            <tbody>
                <tr><td></td><td><b>क्रo - ${user.slug}</b></td></tr>
                <tr>
                    <td colspan="2" style="text-align:center;"><div class="qr-block">
                        <img src="${BASE_URL}qr_codes/${user.id}_QR.png" style="border:5px solid orange;">
                    </div></td>
                    <td colspan="3" style="text-align:center;"><div class="photo-block">
                        <img src="${BASE_URL}photos/${user.photo}" style="border:5px solid orange;">
                    </div></td>
                </tr>
                <tr><td colspan="5" style="text-align:center; font-size:18px; padding-top:5px;"><b>${user.college}</b></td></tr>
                <tr><td></td><td><b>नाम :</b></td><td colspan="3"><b>${user.name}</b></td></tr>
                <tr><td></td><td><b>मोबाइल नंo :</b></td><td colspan="3"><b>${user.phone}</b></td></tr>
                <tr><td></td><td><b>तैनाती स्थल:</b></td><td colspan="3"><b>${user.ghat}</b></td></tr>
                <tr><td></td><td><b>दायित्व :</b></td><td colspan="3"><b>${user.role}</b></td></tr>
                <tr><td></td><td></td><td></td>
                    <td><img src="https://deeputsav.rmlauexams.in/img/SIGNSS.png" style="height:1.5cm; width:2.5cm; margin-top:10px;"></td>
                    <td style="text-align:right;"><img src="https://deeputsav.rmlauexams.in/img/SIGN.png" style="height:1.5cm; width:3cm; margin-top:10px;"></td>
                </tr>
                <tr style="border-bottom:2px dashed black;">
                    <td></td><td><b>प्राधिकृत हस्ताक्षरी <br>संस्था/इकाई</b></td><td></td>
                    <td><b>नोडल अधिकारी</b></td>
                    <td style="text-align:right;"><b>प्राधिकृत हस्ताक्षरी <br>जिला प्रशासन</b></td>
                </tr>
                <tr><td colspan="5" style="text-align:center; padding-top:15px;">
                    <b>आपात संपर्क सूत्र-</b> &nbsp; +91 8808160420 &nbsp; +91 9170838005
                </td></tr>
            </tbody>
        </table>
    </div>
    `;
}

async function renderCards() {
    const users = await loadCSV();
    const container = document.getElementById("cards-container");
    container.innerHTML = users.map(u => createCard(u)).join("");
}

renderCards();
</script>
</body>
</html>
