<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Print_Data</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./Print_Data_files/flaty.css" rel="stylesheet">
    <link href="./Print_Data_files/flaty-responsive.css" rel="stylesheet">
    <link rel="shortcut icon" href="https://deeputsav.rmlauexams.in/img/favicon.png">
    <script src="./Print_Data_files/jquery.min.js"></script>
    <script src="./Print_Data_files/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <style>
        body { margin: 0; padding: 0; background-color: #FAFAFA; font: 12pt "Tahoma"; }
        .page { width:18cm; min-height: 22cm; padding: 0cm; margin: 0 auto; border-radius: 5px; background: white; box-shadow: 0 0 5px rgba(0,0,0,0.1);}
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; padding: 0.5cm; border: 15px solid #f38610; outline: 2px solid black;}
        .responsive-image { width: 100%; height: auto; }
        @media print {
            .page { width: 8cm; min-height: 10cm; box-shadow: none; background: none; page-break-after: always; }
            table { margin: 0.5cm 5cm 0.25cm 5cm; padding: 0.5cm; border: 15px solid #f38610; outline: 2px solid black; }
        }
        td { vertical-align: top; }
        .img-block { border:5px solid orange; padding:5px; }
    </style>
</head>
<body>
<div class="book">
    <div class="page">
        <div class="container">
            <table class="table-responsive">
                <thead>
                    <tr>
                        <td colspan="5" style="text-align:center">
                            <img src="https://deeputsav.rmlauexams.in/img/NEWPRINTLOGO.png" class="responsive-image" style="margin-bottom:5px;">
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="5" style="text-align:center"><h5><b>परिचय पत्र</b></h5></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><h5><b>क्रo - <span class="user-slug"></span></b></h5></td>
                    </tr>
                    <tr>
                        <td colspan="2" class="img-block" style="width:4cm; height:4cm;">
                            <img class="responsive-image user-qr" style="width:100%; height:100%;">
                        </td>
                        <td colspan="3" class="img-block" style="width:4cm; height:5cm;">
                            <img class="responsive-image user-photo" style="width:100%; height:100%;">
                        </td>
                    </tr>
                    <tr style="height:0.5cm;"></tr>
                    <tr>
                        <td colspan="5" style="text-align:center; font-size:18px"><b class="user-college"></b></td>
                    </tr>
                    <tr style="height:0.5cm;"></tr>
                    <tr>
                        <td></td>
                        <td><b>नाम :</b></td>
                        <td colspan="3"><b class="user-name"></b></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><b>मोबाइल नंo :</b></td>
                        <td colspan="3"><b class="user-phone"></b></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><b>तैनाती स्थल:</b></td>
                        <td colspan="3"><b class="user-ghat"></b></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><b>दायित्व :</b></td>
                        <td colspan="3"><b class="user-role"></b></td>
                    </tr>
                    <tr style="height:1cm;"></tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>
                            <img src="https://deeputsav.rmlauexams.in/img/SIGNSS.png" class="responsive-image" style="height:1.5cm; width:2.5cm; margin-top:5px;">
                        </td>
                        <td style="text-align:right">
                            <img src="https://deeputsav.rmlauexams.in/img/SIGN.png" class="responsive-image" style="height:1.5cm; width:3cm; margin-top:5px;">
                        </td>
                    </tr>
                    <tr style="border-bottom:2px dashed black;">
                        <td></td>
                        <td style="text-align:left"><b>प्राधिकृत हस्ताक्षरी <br>संस्था/इकाई</b></td>
                        <td></td>
                        <td><b>नोडल अधिकारी</b></td>
                        <td style="text-align:right"><b>प्राधिकृत हस्ताक्षरी <br>जिला प्रशासन</b></td>
                    </tr>
                    <tr style="height:0.7cm;"></tr>
                    <tr>
                        <td colspan="7" style="text-align:center">
                            <h6><b>आपात संपर्क सूत्र-</b> &nbsp; +91 8808160420 &nbsp; +91 9170838005</h6>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
const BASE_URL = "https://deeputsavrmlauexamsin.github.io/Department/Print_Data/";

fetch(BASE_URL + "data.csv")
.then(response => response.text())
.then(csvText => {
    Papa.parse(csvText, {
        header: true,
        delimiter: "\t",
        skipEmptyLines: true,
        complete: function(results) {
            const users = results.data;
            const slug = new URLSearchParams(window.location.search).get("ID");
            const user = users.find(u => u.slug === slug);
            if(user){
                document.querySelector(".user-slug").innerText = user.id;
                document.querySelector(".user-name").innerText = user.name;
                document.querySelector(".user-phone").innerText = user.phone;
                document.querySelector(".user-ghat").innerText = user.ghat;
                document.querySelector(".user-role").innerText = user.role;
                document.querySelector(".user-college").innerText = user.college;
                document.querySelector(".user-photo").src = BASE_URL + "photos/" + user.photo;
                document.querySelector(".user-qr").src = BASE_URL + "qr_codes/" + user.id + "_QR.png";
            }
        }
    });
});
</script>
</body>
</html>
