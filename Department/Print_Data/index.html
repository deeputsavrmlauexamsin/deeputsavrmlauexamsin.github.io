<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Print_Data</title>
<link href="./Print_Data_files/flaty.css" rel="stylesheet">
<link href="./Print_Data_files/flaty-responsive.css" rel="stylesheet">
<link rel="shortcut icon" href="https://deeputsav.rmlauexams.in/img/favicon.png">
<script src="./Print_Data_files/jquery.min.js"></script>
<script src="./Print_Data_files/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<style>
body {margin:0;padding:0;background-color:#FAFAFA;font:12pt "Tahoma";}
* {box-sizing:border-box;-moz-box-sizing:border-box;}
.page {width:18cm;min-height:22cm;padding:0;margin:0 auto;border-radius:5px;background:white;box-shadow:0 0 5px rgba(0,0,0,0.1);}
.responsive-image {height:auto;width:100%;}
table {width:100%;border-collapse:collapse;margin-bottom:20px;padding:0.5cm;border:15px solid #f38610;outline:2px solid black;}
@page {size:A4;margin:2cm;}
@media print {.page {border-radius:initial;width:8cm;min-height:10cm;box-shadow:initial;background:initial;page-break-after:always;}}
</style>
</head>
<body>

<div class="book">
    <div class="page">
        <div class="container">
            <div class="row">
                <table class="table-responsive">
                    <thead>
                        <tr>
                            <td colspan="5">
                                <div class="box-title">
                                    <img id="logo" src="https://deeputsav.rmlauexams.in/img/NEWPRINTLOGO.png" class="responsive-image">
                                </div>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="5" style="text-align:center"><b>परिचय पत्र</b></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><b id="card-id">क्रo - G07-03923</b></td>
                        </tr>
                        <tr>
                            <td colspan="2"><img id="qr-img" class="responsive-image" style="height:4cm;width:4cm;border:5px solid orange;" src=""></td>
                            <td colspan="3"><img id="photo-img" class="responsive-image" style="height:5cm;width:4cm;border:5px solid orange;" src=""></td>
                        </tr>
                        <tr style="height:0.5cm;"></tr>
                        <tr>
                            <td colspan="5" style="text-align:center;font-size:18px"><b id="college-name">का.सु. साकेत पी.जी. कॉलेज अयोध्या</b></td>
                        </tr>
                        <tr style="height:0.5cm;"></tr>
                        <tr>
                            <td></td>
                            <td><b>नाम :</b></td>
                            <td colspan="3"><b id="name-field">आदेश तिवारी</b></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><b>मोबाइल नंo :</b></td>
                            <td colspan="3"><b id="phone-field">9696511083</b></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><b>तैनाती स्थल:</b></td>
                            <td colspan="3"><b id="ghat-field">राम की पैड़ी घाट नं : 7</b></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><b>दायित्व :</b></td>
                            <td colspan="3"><b id="role-field">स्वयंसेवक</b></td>
                        </tr>
                        <tr style="height:1cm;"></tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><img src="https://deeputsav.rmlauexams.in/img/SIGNSS.png" style="height:1.5cm;width:2.5cm;"></td>
                            <td style="text-align:right"><img src="https://deeputsav.rmlauexams.in/img/SIGN.png" style="height:1.5cm;width:3cm;"></td>
                        </tr>
                        <tr style="border-bottom:2px dashed black;">
                            <td></td>
                            <td><b>प्राधिकृत हस्ताक्षरी <br>संस्था/इकाई</b></td>
                            <td></td>
                            <td><b>नोडल अधिकारी</b></td>
                            <td style="text-align:right"><b>प्राधिकृत हस्ताक्षरी <br> जिला प्रशासन</b></td>
                        </tr>
                        <tr style="height:0.7cm;"></tr>
                        <tr>
                            <td colspan="7" style="text-align:center">
                                <b>आपात संपर्क सूत्र-</b> +91 8808160420 &nbsp; +91 9170838005
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
// Helper functions
function getParameterByName(name) {
    const url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    const regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)");
    const results = regex.exec(url);
    return results && results[2] ? decodeURIComponent(results[2]) : null;
}

const slugID = getParameterByName("ID");

Papa.parse("data.csv", {
    download: true,
    header: true,
    complete: function(results) {
        const data = results.data;
        const user = data.find(u => u.slug === slugID);
        if (!user) return;

        // Fill card
        document.getElementById("card-id").textContent = "क्रo - " + user.id;
        document.getElementById("name-field").textContent = user.name;
        document.getElementById("phone-field").textContent = user.phone;
        document.getElementById("ghat-field").textContent = user.ghat;
        document.getElementById("role-field").textContent = user.role;
        document.getElementById("college-name").textContent = user.college;
        document.getElementById("photo-img").src = "photos/" + user.photo;
        document.getElementById("qr-img").src = "qrs/" + user.slug + "_QR.png";
    }
});
</script>

</body>
</html>
